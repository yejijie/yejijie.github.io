<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="奔跑吧菜鸟"><title>[LeetCode]Game of Life | NoobSky</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/2.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">[LeetCode]Game of Life</h1><a id="logo" href="/.">NoobSky</a><p class="description">Talk is cheap. Show me the code. - http://noobsky.com</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/guestbook/"><i class="fa fa-comments"> 留言</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">[LeetCode]Game of Life</h1><div class="post-meta">Jul 6, 2016<span> | </span><span class="category"><a href="/categories/Leetcode/">Leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2016/07/06/LeetCode-Game-of-Life/" href="/2016/07/06/LeetCode-Game-of-Life/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><h2 id="题目描述">题目描述</h2><p>According to the <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" target="_blank" rel="external">Wikipedia’s article</a>: “The Game of Life, also known simply as Life, is a cellular automaton devised by the British mathematician John Horton Conway in 1970.”</p>
<p>Given a board with m by n cells, each cell has an initial state live (1) or dead (0). Each cell interacts with its eight neighbors (horizontal, vertical, diagonal) using the following four rules (taken from the above Wikipedia article):</p>
<pre><code><span class="number">1.</span> Any live cell <span class="operator">with</span> fewer than <span class="constant">two</span> live neighbors dies, <span class="keyword">as</span> <span class="keyword">if</span> caused <span class="keyword">by</span> under-population.
<span class="number">2.</span> Any live cell <span class="operator">with</span> <span class="constant">two</span> <span class="operator">or</span> <span class="constant">three</span> live neighbors lives <span class="command"><span class="keyword">on</span> <span class="title">to</span> <span class="title">the</span> <span class="title">next</span> <span class="title">generation</span>.</span>
<span class="number">3.</span> Any live cell <span class="operator">with</span> more than <span class="constant">three</span> live neighbors dies, <span class="keyword">as</span> <span class="keyword">if</span> <span class="keyword">by</span> over-population..
<span class="number">4.</span> Any dead cell <span class="operator">with</span> exactly <span class="constant">three</span> live neighbors becomes <span class="operator">a</span> live cell, <span class="keyword">as</span> <span class="keyword">if</span> <span class="keyword">by</span> reproduction.
</code></pre><p>Write a function to compute the next state (after one update) of the board given its current state.</p>
<p><strong> Follow up: </strong> </p>
<pre><code><span class="number">1.</span> Could you solve <span class="keyword">it</span> <span class="operator">in</span>-place? Remember that <span class="operator">the</span> board needs <span class="built_in">to</span> be updated <span class="keyword">at</span> <span class="operator">the</span> same <span class="built_in">time</span>: You cannot update some cells <span class="keyword">first</span> <span class="operator">and</span> <span class="keyword">then</span> use their updated values <span class="built_in">to</span> update other cells.
<span class="number">2.</span> In this question, we represent <span class="operator">the</span> board <span class="keyword">using</span> <span class="operator">a</span> <span class="number">2</span>D array. In principle, <span class="operator">the</span> board is infinite, which would cause problems when <span class="operator">the</span> active area encroaches <span class="operator">the</span> border <span class="operator">of</span> <span class="operator">the</span> array. How would you address these problems?
</code></pre><h2 id="代码">代码</h2><p>每个细胞有一个初始状态活(1)或死(0)，每个细胞与周围八个细胞(水平、竖直、对角线)相互作用，规则如下：</p>
<ul>
<li>如果活细胞周围八个位置的活细胞少于两个，则该位置的活细胞会死亡 </li>
<li>如果活细胞周围八个位置有两个或者三个活细胞，则该位置的活细胞仍然存活</li>
<li>如果活细胞周围八个位置有超过三个活细胞，则该位置的活细胞死亡</li>
<li>如果死细胞周围八个位置刚好有三个活细胞，则该位置的死细胞复活</li>
</ul>
<p>为了不使用额外的内存(in place)，我们使用两比特位来表示状态</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="list">[<span class="keyword">2nd</span> bit, <span class="number">1</span>st bit] = <span class="list">[<span class="keyword">next</span> state, current state]</span><br><span class="line"></span><br><span class="line">- <span class="number">00</span>  dead <span class="list">(<span class="keyword">next</span>)</span> &lt;- dead <span class="list">(<span class="keyword">current</span>)</span></span><br><span class="line">- <span class="number">01</span>  dead <span class="list">(<span class="keyword">next</span>)</span> &lt;- live <span class="list">(<span class="keyword">current</span>)</span>  </span><br><span class="line">- <span class="number">10</span>  live <span class="list">(<span class="keyword">next</span>)</span> &lt;- dead <span class="list">(<span class="keyword">current</span>)</span>  </span><br><span class="line">- <span class="number">11</span>  live <span class="list">(<span class="keyword">next</span>)</span> &lt;- live <span class="list">(<span class="keyword">current</span>)</span></span></span></span><br></pre></td></tr></table></figure>
<p>我们用第一个比特位(从右往左)表示当前细胞的状态，1（二进制01，活）、0(二进制00，死)，第二个比特位来表示细胞下一代的状态(00/01(死)、10/11(活))。</p>
<ul>
<li>初始时，任何细胞的状态为00或01</li>
<li>我们统计当前细胞周围的活细胞数量(第一个比特位)来决定细胞的下一状态(设置第二个比特位)，然后右移一位，第二比特位变成第一比特位就得到细胞的下一状态</li>
<li>因为第二个比特位默认为0(因为只有0和1)也就是代表细胞死，所以我们不需要考虑细胞的下一状态为死的转换(00-&gt;00、01-&gt;01)</li>
<li>最后我们通过右移一位来删除细胞当前的状态进入下一状态(即第二比特位成为第一比特位)</li>
</ul>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> Solution &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">gameOfLife</span><span class="params">(<span class="keyword">int</span>[][] board)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(board == null || board.length == <span class="number">0</span> || board[<span class="number">0</span>].length == <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">int</span> row = board.length;</span><br><span class="line">        <span class="keyword">int</span> col = board[<span class="number">0</span>].length;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++)&#123;</span><br><span class="line">                <span class="keyword">int</span> lives = liveNeighbors(board, row, col, i, j);</span><br><span class="line">                </span><br><span class="line">                <span class="comment">//第二比特位初始就为0，所以我们只需要考虑第二比特位会变成1的情况</span></span><br><span class="line">                <span class="comment">//有两种情况：当前存活且周围活细胞数是2或3，则仍然存活,01-&gt;11</span></span><br><span class="line">                <span class="comment">//当前细胞死亡，周围刚好有三个活细胞，复活00-&gt;10</span></span><br><span class="line">                <span class="comment">//我们只需要将第二比特位置为1，不改变第一比特位的值，不会干扰其他细胞的判断</span></span><br><span class="line">                <span class="keyword">if</span>(board[i][j] == <span class="number">1</span> &amp;&amp; lives &gt;= <span class="number">2</span> &amp;&amp; lives &lt;= <span class="number">3</span>)&#123;</span><br><span class="line">                    board[i][j] = <span class="number">3</span>;<span class="comment">//将第二比特位置为1，即11，就是3</span></span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span>(board[i][j] == <span class="number">0</span> &amp;&amp; lives == <span class="number">3</span>)&#123;</span><br><span class="line">                    board[i][j] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//全部细胞转化后，右移一位，更新细胞的状态</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; i++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; j++)&#123;</span><br><span class="line">                board[i][j] &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//统计细胞board[i][j]周围细胞的存活数量</span></span><br><span class="line">    <span class="comment">//row、col可以传进来也可以不传</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">liveNeighbors</span><span class="params">(<span class="keyword">int</span>[][] board, <span class="keyword">int</span> row, <span class="keyword">int</span> col, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        <span class="keyword">int</span> lives = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//遍历board[i][j]为中心的小九宫格即可</span></span><br><span class="line">        <span class="comment">//用Math.min/max来处理边界还是很tricky的</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> x = Math.max(i - <span class="number">1</span>, <span class="number">0</span>); x &lt;= Math.min(i+<span class="number">1</span>, row-<span class="number">1</span>); x++)&#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> y = Math.max(j - <span class="number">1</span>, <span class="number">0</span>); y &lt;= Math.min(j+<span class="number">1</span>, col-<span class="number">1</span>); y++)&#123;</span><br><span class="line">                <span class="comment">//board[x][y]为1存活数加1，&amp;1可以达到这个目的</span></span><br><span class="line">                lives += board[x][y] &amp; <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//因为九宫格也统计了自身board[i][j]的状态，需要减掉</span></span><br><span class="line">        lives -= board[i][j] &amp; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> lives;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://blog.noobsky.com/2016/07/06/LeetCode-Game-of-Life/" data-id="citm9rv8900hp6sc1wdrxwtpb" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Java/">Java</a><a href="/tags/算法/">算法</a></div><div class="post-nav"><a href="/2016/07/06/LeetCode-Largest-Divisible-Subset/" class="pre">[LeetCode]Largest Divisible Subset</a><a href="/2016/07/05/LeetCode-Container-With-Most-Water/" class="next">[LeetCode]Container With Most Water</a></div><div id="disqus_thread"><script>var disqus_shortname = 'noobsky';
var disqus_identifier = '2016/07/06/LeetCode-Game-of-Life/';
var disqus_title = '[LeetCode]Game of Life';
var disqus_url = 'http://blog.noobsky.com/2016/07/06/LeetCode-Game-of-Life/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//noobsky.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.noobsky.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Leetcode/">Leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nodejs/">Nodejs</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shadowsocks/">Shadowsocks</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Two-Pointers/" style="font-size: 15px;">Two Pointers</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/代理/" style="font-size: 15px;">代理</a> <a href="/tags/Nodejs/" style="font-size: 15px;">Nodejs</a> <a href="/tags/node-http-proxy/" style="font-size: 15px;">node-http-proxy</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/JVM基本结构/" style="font-size: 15px;">JVM基本结构</a> <a href="/tags/JVM参数/" style="font-size: 15px;">JVM参数</a> <a href="/tags/垃圾收集器/" style="font-size: 15px;">垃圾收集器</a> <a href="/tags/谷歌学术/" style="font-size: 15px;">谷歌学术</a> <a href="/tags/Shadowsocks/" style="font-size: 15px;">Shadowsocks</a> <a href="/tags/AWS/" style="font-size: 15px;">AWS</a> <a href="/tags/线程安全/" style="font-size: 15px;">线程安全</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/Hash-Table/" style="font-size: 15px;">Hash Table</a> <a href="/tags/Sort/" style="font-size: 15px;">Sort</a> <a href="/tags/Bit-Manipulation/" style="font-size: 15px;">Bit Manipulation</a> <a href="/tags/Tree/" style="font-size: 15px;">Tree</a> <a href="/tags/DFS/" style="font-size: 15px;">DFS</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/String/" style="font-size: 15px;">String</a> <a href="/tags/string/" style="font-size: 15px;">string</a> <a href="/tags/Math/" style="font-size: 15px;">Math</a> <a href="/tags/Array/" style="font-size: 15px;">Array</a> <a href="/tags/Brainteaser/" style="font-size: 15px;">Brainteaser</a> <a href="/tags/BFS/" style="font-size: 15px;">BFS</a> <a href="/tags/Linked-List/" style="font-size: 15px;">Linked List</a> <a href="/tags/Binary-Search/" style="font-size: 15px;">Binary Search</a> <a href="/tags/Dynamic-Programming/" style="font-size: 15px;">Dynamic Programming</a> <a href="/tags/静态代理/" style="font-size: 15px;">静态代理</a> <a href="/tags/动态代理/" style="font-size: 15px;">动态代理</a> <a href="/tags/注解/" style="font-size: 15px;">注解</a> <a href="/tags/Java线程池/" style="font-size: 15px;">Java线程池</a> <a href="/tags/反射/" style="font-size: 15px;">反射</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/面试/" style="font-size: 15px;">面试</a> <a href="/tags/Floyd判圈算法/" style="font-size: 15px;">Floyd判圈算法</a> <a href="/tags/DTW/" style="font-size: 15px;">DTW</a> <a href="/tags/语音识别/" style="font-size: 15px;">语音识别</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/09/28/面试算法之动态规划问题集锦/">面试算法之动态规划问题集锦</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/26/排序算法/">排序算法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/25/面试算法之链表问题集锦/">面试算法之链表问题集锦</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/24/面试基础问题/">面试基础问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/17/LeetCode-Plus-One/">[LeetCode]Plus One</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/16/实战Java虚拟机之性能监控工具/">实战Java虚拟机之性能监控工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/MySQL高可用/">MySQL高可用</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/08/LeetCode-Remove-Element/">[LeetCode]Remove Element</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/08/LeetCode-Reverse-Vowels-of-a-String/">[LeetCode]Reverse Vowels of a String</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/05/Java并发编程之线程池/">Java并发编程之线程池</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//noobsky.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://coolshell.cn/" title="酷壳" target="_blank">酷壳</a><ul></ul><a href="http://www.importnew.com/" title="ImportNew" target="_blank">ImportNew</a><ul></ul><a href="http://toutiao.io/" title="开发者头条" target="_blank">开发者头条</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">NoobSky.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>